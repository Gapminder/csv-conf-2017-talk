!function(t){function i(e){if(n[e])return n[e].exports;var s=n[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,i),s.l=!0,s.exports}var n={};i.m=t,i.c=n,i.i=function(t){return t},i.d=function(t,n,e){i.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:e})},i.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(n,"a",n),n},i.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},i.p="",i(i.s=101)}([function(t,i,n){"use strict";i.a=function(t){return function(){return t}}},function(t,i,n){"use strict";i.a=function(t,i){return t<i?-1:t>i?1:t>=i?0:NaN}},function(t,i,n){"use strict";i.a=function(t){return null===t?NaN:+t}},function(t,i,n){"use strict";var e=n(69);n.d(i,"a",function(){return e.a})},function(t,i,n){"use strict";function e(t){return t>1?0:t<-1?f:Math.acos(t)}function s(t){return t>=1?d:t<=-1?-d:Math.asin(t)}n.d(i,"g",function(){return r}),n.d(i,"m",function(){return o}),n.d(i,"h",function(){return a}),n.d(i,"e",function(){return h}),n.d(i,"j",function(){return c}),n.d(i,"i",function(){return u}),n.d(i,"d",function(){return _}),n.d(i,"a",function(){return l}),n.d(i,"b",function(){return f}),n.d(i,"f",function(){return d}),n.d(i,"c",function(){return p}),i.l=e,i.k=s;var r=Math.abs,o=Math.atan2,a=Math.cos,h=Math.max,c=Math.min,u=Math.sin,_=Math.sqrt,l=1e-12,f=Math.PI,d=f/2,p=2*f},function(t,i,n){"use strict";i.a=function(t,i){if((s=t.length)>1)for(var n,e,s,r=1,o=t[i[0]],a=o.length;r<s;++r)for(e=o,o=t[i[r]],n=0;n<a;++n)o[n][1]+=o[n][0]=isNaN(e[n][1])?e[n][0]:e[n][1]}},function(t,i,n){"use strict";i.a=function(t){for(var i=t.length,n=new Array(i);--i>=0;)n[i]=i;return n}},function(t,i,n){"use strict";function e(t,i,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+i)/6,(t._y0+4*t._y1+n)/6)}function s(t){this._context=t}i.b=e,i.a=s,s.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:e(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,i){switch(t=+t,i=+i,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:e(this,t,i)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=i}}},function(t,i,n){"use strict";function e(t,i,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-i),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function s(t,i){this._context=t,this._k=(1-i)/6}i.b=e,i.a=s,s.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:e(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,i){switch(t=+t,i=+i,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break;case 1:this._point=2,this._x1=t,this._y1=i;break;case 2:this._point=3;default:e(this,t,i)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=i}};!function t(i){function n(t){return new s(t,i)}return n.tension=function(i){return t(+i)},n}(0)},function(t,i,n){"use strict";function e(t){this._context=t}e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,i){switch(t=+t,i=+i,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break;case 1:this._point=2;default:this._context.lineTo(t,i)}}},i.a=function(t){return new e(t)}},function(t,i,n){"use strict";i.a=function(){}},function(t,i,n){"use strict";var e=n(2);i.a=function(t,i,n){if(null==n&&(n=e.a),s=t.length){if((i=+i)<=0||s<2)return+n(t[0],0,t);if(i>=1)return+n(t[s-1],s-1,t);var s,r=(s-1)*i,o=Math.floor(r),a=+n(t[o],o,t);return a+(+n(t[o+1],o+1,t)-a)*(r-o)}}},function(t,i,n){"use strict";function e(){}function s(t,i){var n=new e;if(t instanceof e)t.each(function(t,i){n.set(i,t)});else if(Array.isArray(t)){var s,r=-1,o=t.length;if(null==i)for(;++r<o;)n.set(r,t[r]);else for(;++r<o;)n.set(i(s=t[r],r,t),s)}else if(t)for(var a in t)n.set(a,t[a]);return n}n.d(i,"b",function(){return r});var r="$";e.prototype=s.prototype={constructor:e,has:function(t){return r+t in this},get:function(t){return this[r+t]},set:function(t,i){return this[r+t]=i,this},remove:function(t){var i=r+t;return i in this&&delete this[i]},clear:function(){for(var t in this)t[0]===r&&delete this[t]},keys:function(){var t=[];for(var i in this)i[0]===r&&t.push(i.slice(1));return t},values:function(){var t=[];for(var i in this)i[0]===r&&t.push(this[i]);return t},entries:function(){var t=[];for(var i in this)i[0]===r&&t.push({key:i.slice(1),value:this[i]});return t},size:function(){var t=0;for(var i in this)i[0]===r&&++t;return t},empty:function(){for(var t in this)if(t[0]===r)return!1;return!0},each:function(t){for(var i in this)i[0]===r&&t(this[i],i.slice(1),this)}},i.a=s},function(t,i,n){"use strict";function e(t,i,n){var e=t._x1,s=t._y1,o=t._x2,a=t._y2;if(t._l01_a>r.a){var h=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,c=3*t._l01_a*(t._l01_a+t._l12_a);e=(e*h-t._x0*t._l12_2a+t._x2*t._l01_2a)/c,s=(s*h-t._y0*t._l12_2a+t._y2*t._l01_2a)/c}if(t._l23_a>r.a){var u=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,_=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*u+t._x1*t._l23_2a-i*t._l12_2a)/_,a=(a*u+t._y1*t._l23_2a-n*t._l12_2a)/_}t._context.bezierCurveTo(e,s,o,a,t._x2,t._y2)}function s(t,i){this._context=t,this._alpha=i}i.a=e;var r=n(4),o=n(8);s.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,i){if(t=+t,i=+i,this._point){var n=this._x2-t,s=this._y2-i;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+s*s,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break;case 1:this._point=2;break;case 2:this._point=3;default:e(this,t,i)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=i}};!function t(i){function n(t){return i?new s(t,i):new o.a(t,0)}return n.alpha=function(i){return t(+i)},n}(.5)},function(t,i,n){"use strict";var e=n(3),s=n(0),r=n(9),o=n(16);i.a=function(){function t(t){var s,r,o,l=t.length,f=!1;for(null==c&&(_=u(o=n.i(e.a)())),s=0;s<=l;++s)!(s<l&&h(r=t[s],s,t))===f&&((f=!f)?_.lineStart():_.lineEnd()),f&&_.point(+i(r,s,t),+a(r,s,t));if(o)return _=null,o+""||null}var i=o.a,a=o.b,h=n.i(s.a)(!0),c=null,u=r.a,_=null;return t.x=function(e){return arguments.length?(i="function"===typeof e?e:n.i(s.a)(+e),t):i},t.y=function(i){return arguments.length?(a="function"===typeof i?i:n.i(s.a)(+i),t):a},t.defined=function(i){return arguments.length?(h="function"===typeof i?i:n.i(s.a)(!!i),t):h},t.curve=function(i){return arguments.length?(u=i,null!=c&&(_=u(c)),t):u},t.context=function(i){return arguments.length?(null==i?c=_=null:_=u(c=i),t):c},t}},function(t,i,n){"use strict";function e(t){for(var i,n=0,e=-1,s=t.length;++e<s;)(i=+t[e][1])&&(n+=i);return n}i.a=e;var s=n(6);i.b=function(t){var i=t.map(e);return n.i(s.a)(t).sort(function(t,n){return i[t]-i[n]})}},function(t,i,n){"use strict";function e(t){return t[0]}function s(t){return t[1]}i.a=e,i.b=s},function(t,i,n){"use strict";var e=(n(19),n(1));n.d(i,"c",function(){return e.a});var s=(n(20),n(48),n(49),n(21),n(22),n(50),n(60),n(61),n(26),n(52),n(53),n(54),n(55),n(23));n.d(i,"a",function(){return s.a});var r=(n(24),n(56),n(11),n(25),n(57),n(58),n(59));n.d(i,"b",function(){return r.a});n(27),n(28),n(29),n(62)},function(t,i,n){"use strict";n.d(i,"b",function(){return s}),n.d(i,"a",function(){return r});var e=Array.prototype,s=e.slice,r=e.map},function(t,i,n){"use strict";var e=n(1),s=n(20),r=n.i(s.a)(e.a),o=r.right;r.left;i.a=o},function(t,i,n){"use strict";function e(t){return function(i,e){return n.i(s.a)(t(i),e)}}var s=n(1);i.a=function(t){return 1===t.length&&(t=e(t)),{left:function(i,n,e,s){for(null==e&&(e=0),null==s&&(s=i.length);e<s;){var r=e+s>>>1;t(i[r],n)<0?e=r+1:s=r}return e},right:function(i,n,e,s){for(null==e&&(e=0),null==s&&(s=i.length);e<s;){var r=e+s>>>1;t(i[r],n)>0?s=r:e=r+1}return e}}}},function(t,i,n){"use strict";var e=n(29);i.a=function(t,i){var s=n.i(e.a)(t,i);return s?Math.sqrt(s):s}},function(t,i,n){"use strict";i.a=function(t,i){var n,e,s,r=t.length,o=-1;if(null==i){for(;++o<r;)if(null!=(n=t[o])&&n>=n)for(e=s=n;++o<r;)null!=(n=t[o])&&(e>n&&(e=n),s<n&&(s=n))}else for(;++o<r;)if(null!=(n=i(t[o],o,t))&&n>=n)for(e=s=n;++o<r;)null!=(n=i(t[o],o,t))&&(e>n&&(e=n),s<n&&(s=n));return[e,s]}},function(t,i,n){"use strict";i.a=function(t,i){var n,e,s=t.length,r=-1;if(null==i){for(;++r<s;)if(null!=(n=t[r])&&n>=n)for(e=n;++r<s;)null!=(n=t[r])&&e>n&&(e=n)}else for(;++r<s;)if(null!=(n=i(t[r],r,t))&&n>=n)for(e=n;++r<s;)null!=(n=i(t[r],r,t))&&e>n&&(e=n);return e}},function(t,i,n){"use strict";function e(t,i){return[t,i]}i.a=e},function(t,i,n){"use strict";i.a=function(t,i,n){t=+t,i=+i,n=(s=arguments.length)<2?(i=t,t=0,1):s<3?1:+n;for(var e=-1,s=0|Math.max(0,Math.ceil((i-t)/n)),r=new Array(s);++e<s;)r[e]=t+e*n;return r}},function(t,i,n){"use strict";i.a=function(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1}},function(t,i,n){"use strict";function e(t,i,n){var e=Math.abs(i-t)/Math.max(0,n),a=Math.pow(10,Math.floor(Math.log(e)/Math.LN10)),h=e/a;return h>=s?a*=10:h>=r?a*=5:h>=o&&(a*=2),i<t?-a:a}i.a=e;var s=Math.sqrt(50),r=Math.sqrt(10),o=Math.sqrt(2)},function(t,i,n){"use strict";function e(t){return t.length}var s=n(23);i.a=function(t){if(!(a=t.length))return[];for(var i=-1,r=n.i(s.a)(t,e),o=new Array(r);++i<r;)for(var a,h=-1,c=o[i]=new Array(a);++h<a;)c[h]=t[h][i];return o}},function(t,i,n){"use strict";var e=n(2);i.a=function(t,i){var s,r,o=t.length,a=0,h=-1,c=0,u=0;if(null==i)for(;++h<o;)isNaN(s=n.i(e.a)(t[h]))||(r=s-c,c+=r/++a,u+=r*(s-c));else for(;++h<o;)isNaN(s=n.i(e.a)(i(t[h],h,t)))||(r=s-c,c+=r/++a,u+=r*(s-c));if(a>1)return u/(a-1)}},function(t,i,n){"use strict";var e=n(3),s=n(0),r=n(9),o=n(14),a=n(16);i.a=function(){function t(t){var i,s,r,o,a,y=t.length,x=!1,g=new Array(y),v=new Array(y);for(null==f&&(p=d(a=n.i(e.a)())),i=0;i<=y;++i){if(!(i<y&&l(o=t[i],i,t))===x)if(x=!x)s=i,p.areaStart(),p.lineStart();else{for(p.lineEnd(),p.lineStart(),r=i-1;r>=s;--r)p.point(g[r],v[r]);p.lineEnd(),p.areaEnd()}x&&(g[i]=+h(o,i,t),v[i]=+u(o,i,t),p.point(c?+c(o,i,t):g[i],_?+_(o,i,t):v[i]))}if(a)return p=null,a+""||null}function i(){return n.i(o.a)().defined(l).curve(d).context(f)}var h=a.a,c=null,u=n.i(s.a)(0),_=a.b,l=n.i(s.a)(!0),f=null,d=r.a,p=null;return t.x=function(i){return arguments.length?(h="function"===typeof i?i:n.i(s.a)(+i),c=null,t):h},t.x0=function(i){return arguments.length?(h="function"===typeof i?i:n.i(s.a)(+i),t):h},t.x1=function(i){return arguments.length?(c=null==i?null:"function"===typeof i?i:n.i(s.a)(+i),t):c},t.y=function(i){return arguments.length?(u="function"===typeof i?i:n.i(s.a)(+i),_=null,t):u},t.y0=function(i){return arguments.length?(u="function"===typeof i?i:n.i(s.a)(+i),t):u},t.y1=function(i){return arguments.length?(_=null==i?null:"function"===typeof i?i:n.i(s.a)(+i),t):_},t.lineX0=t.lineY0=function(){return i().x(h).y(u)},t.lineY1=function(){return i().x(h).y(_)},t.lineX1=function(){return i().x(c).y(u)},t.defined=function(i){return arguments.length?(l="function"===typeof i?i:n.i(s.a)(!!i),t):l},t.curve=function(i){return arguments.length?(d=i,null!=f&&(p=d(f)),t):d},t.context=function(i){return arguments.length?(null==i?f=p=null:p=d(f=i),t):f},t}},function(t,i,n){"use strict";n.d(i,"a",function(){return e});var e=Array.prototype.slice},function(t,i,n){"use strict";function e(t,i){this._context=t,this._k=(1-i)/6}i.a=e;var s=n(10),r=n(8);e.prototype={areaStart:s.a,areaEnd:s.a,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,i){switch(t=+t,i=+i,this._point){case 0:this._point=1,this._x3=t,this._y3=i;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=i);break;case 2:this._point=3,this._x5=t,this._y5=i;break;default:n.i(r.b)(this,t,i)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=i}};!function t(i){function n(t){return new e(t,i)}return n.tension=function(i){return t(+i)},n}(0)},function(t,i,n){"use strict";function e(t,i){this._context=t,this._k=(1-i)/6}i.a=e;var s=n(8);e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,i){switch(t=+t,i=+i,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:n.i(s.b)(this,t,i)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=i}};!function t(i){function n(t){return new e(t,i)}return n.tension=function(i){return t(+i)},n}(0)},function(t,i,n){"use strict";function e(t){this._curve=t}function s(t){function i(i){return new e(t(i))}return i._curve=t,i}n.d(i,"b",function(){return o}),i.a=s;var r=n(9),o=s(r.a);e.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,i){this._curve.point(i*Math.sin(t),i*-Math.cos(t))}}},function(t,i,n){"use strict";function e(t){var i=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?i(n.i(s.a)(t)):i()._curve},t}i.a=e;var s=n(34);n(14)},function(t,i,n){"use strict";i.a=function(t,i){return[(i=+i)*Math.cos(t-=Math.PI/2),i*Math.sin(t)]}},function(t,i,n){"use strict";var e=n(4);i.a={draw:function(t,i){var n=Math.sqrt(i/e.b);t.moveTo(n,0),t.arc(0,0,n,0,e.c)}}},function(t,i,n){"use strict";i.a={draw:function(t,i){var n=Math.sqrt(i/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}}},function(t,i,n){"use strict";var e=Math.sqrt(1/3),s=2*e;i.a={draw:function(t,i){var n=Math.sqrt(i/s),r=n*e;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}}},function(t,i,n){"use strict";i.a={draw:function(t,i){var n=Math.sqrt(i),e=-n/2;t.rect(e,e,n,n)}}},function(t,i,n){"use strict";var e=n(4),s=Math.sin(e.b/10)/Math.sin(7*e.b/10),r=Math.sin(e.c/10)*s,o=-Math.cos(e.c/10)*s;i.a={draw:function(t,i){var n=Math.sqrt(.8908130915292852*i),s=r*n,a=o*n;t.moveTo(0,-n),t.lineTo(s,a);for(var h=1;h<5;++h){var c=e.c*h/5,u=Math.cos(c),_=Math.sin(c);t.lineTo(_*n,-u*n),t.lineTo(u*s-_*a,_*s+u*a)}t.closePath()}}},function(t,i,n){"use strict";var e=Math.sqrt(3);i.a={draw:function(t,i){var n=-Math.sqrt(i/(3*e));t.moveTo(0,2*n),t.lineTo(-e*n,-n),t.lineTo(e*n,-n),t.closePath()}}},function(t,i,n){"use strict";var e=-.5,s=Math.sqrt(3)/2,r=1/Math.sqrt(12),o=3*(r/2+1);i.a={draw:function(t,i){var n=Math.sqrt(i/o),a=n/2,h=n*r,c=a,u=n*r+n,_=-c,l=u;t.moveTo(a,h),t.lineTo(c,u),t.lineTo(_,l),t.lineTo(e*a-s*h,s*a+e*h),t.lineTo(e*c-s*u,s*c+e*u),t.lineTo(e*_-s*l,s*_+e*l),t.lineTo(e*a+s*h,e*h-s*a),t.lineTo(e*c+s*u,e*u-s*c),t.lineTo(e*_+s*l,e*l-s*_),t.closePath()}}},function(t,i,n){"use strict";function e(t){return t.target.depth}function s(t){return t.depth}function r(t,i){return i-1-t.height}function o(t,i){return t.sourceLinks.length?t.depth:i-1}function a(t){return t.targetLinks.length?t.depth:t.sourceLinks.length?n.i(h.a)(t.sourceLinks,e)-1:0}i.b=s,i.c=r,i.d=o,i.a=a;var h=n(17)},function(t,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),n(99);var e=n(46),s=function(t){return t&&t.__esModule?t:{default:t}}(e);i.default=Vizabi.Tool.extend("Sankey",{init:function(t,i){this.name="sankey",this.components=[{component:s.default,placeholder:".vzb-tool-viz",model:["state.time","state.entities_from","state.entities","state.marker_links","state.marker","locale","ui"]},{component:Vizabi.Component.get("timeslider"),placeholder:".vzb-tool-timeslider",model:["state.time","state.entities_from","state.marker_links","ui"]},{component:Vizabi.Component.get("dialogs"),placeholder:".vzb-tool-dialogs",model:["state","ui","locale"]},{component:Vizabi.Component.get("buttonlist"),placeholder:".vzb-tool-buttonlist",model:["state","ui","locale"]},{component:Vizabi.Component.get("treemenu"),placeholder:".vzb-tool-treemenu",model:["state.marker_links","state.marker_tags","state.time","locale"]},{component:Vizabi.Component.get("datanotes"),placeholder:".vzb-tool-datanotes",model:["state.marker_links","locale"]},{component:Vizabi.Component.get("datawarning"),placeholder:".vzb-tool-datawarning",model:["locale"]},{component:Vizabi.Component.get("steppedspeedslider"),placeholder:".vzb-tool-stepped-speed-slider",model:["state.time","locale"]}],this._super(t,i)},default_model:{}})},function(t,i,n){"use strict";function e(t,i,n){return i in t?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n,t}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function t(t,i){var n=[],e=!0,s=!1,r=void 0;try{for(var o,a=t[Symbol.iterator]();!(e=(o=a.next()).done)&&(n.push(o.value),!i||n.length!==i);e=!0);}catch(t){s=!0,r=t}finally{try{!e&&a.return&&a.return()}finally{if(s)throw r}}return n}return function(i,n){if(Array.isArray(i))return i;if(Symbol.iterator in Object(i))return t(i,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=n(70),o=Vizabi,a=o.Component,h=o.utils,c=o.iconset,u=a.extend("sankey",{init:function(t,i){var e=this;this.name="sankey-component",this.template=n(100),this.model_expects=[{name:"time",type:"time"},{name:"entities",type:"entities"},{name:"entitiesAll",type:"entities"},{name:"marker",type:"marker"},{name:"markerEntities",type:"marker"},{name:"locale",type:"locale"},{name:"ui",type:"ui"}],this.model_binds={"change:time.playing":function(){return e._updateAllLabelsOpacity()},"change:time.value":function(){return e._updateValues().then(function(){return e._redraw()})},"change:markerEntities.select":function(){e._highlightEntities(),e._updateAllLabelsOpacity()},"change:markerEntities.highlight":function(){e._unhighlightEntities(),e._highlightEntities(),e._updateAllLabelsOpacity()}},this._super(t,i)},readyOnce:function(){this._initSettings(),this._setProfile(),this._initBasics(),this._initHeader(),this._initFooter(),this._initSankey()},_initBasics:function(){this._element=d3.select(this.element),this._svg=this._element.select(this._css.dot(this._css.classes.svg)),this._defs=this._svg.select("defs");var t=d3.format(",.0f");this._format=function(i){return t(i)+" TWh"},this._translator=this.model.locale.getTFunction(),this._calculateSize()},_initSettings:function(){this._settings={labelPadding:5,iconMargin:5,gradientTransitionDuration:300},this._profiles={small:{nodeWidth:15,iconSize:16,nodePadding:3,margin:{top:10,left:10,bottom:10,right:10}},medium:{nodeWidth:17,iconSize:16,nodePadding:6,margin:{top:10,left:10,bottom:10,right:10}},large:{nodeWidth:19,iconSize:16,nodePadding:10,margin:{top:10,left:10,bottom:10,right:10}}},this._presentationProfiles={medium:Object.assign({},this._profiles.medium,{nodeWidth:22}),large:Object.assign({},this._profiles.large,{nodeWidth:25})},this._css={dot:function(t){return t.split(" ").filter(Boolean).map(function(t){return"."+t}).join(" ")},classes:{svg:"vzb-sankey-svg",header:"vzb-sankey-header",headerText:"vzb-sankey-header-text",footer:"vzb-sankey-footer",footerText:"vzb-sankey-footer-text",info:"vzb-data-info-icon",warning:"vzb-data-warning-icon",nodesContainer:"nodes-container",node:"node",defaultText:"default-text",strokeText:"stroke-text",stroke:"stroke",linksContainer:"links-container",link:"link",gradientLinksContainer:"gradient-links-container",gradientLink:"gradient-link"}}},_calculateSize:function(){this._width=h.px2num(this._element.style("width")),this._height=h.px2num(this._element.style("height"))},_initHeader:function(){this._header=this._svg.select(this._css.dot(this._css.classes.header)),this._initHeaderText(),this._initHeaderInfo()},_initHeaderText:function(){var t=this;this._headerText=this._header.select(this._css.dot(this._css.classes.headerText)).on("click",function(){return t.parent.findChildByName("gapminder-treemenu").markerID("size").alignX("left").alignY("top").updateView().toggle()})},_initHeaderInfo:function(){var t=this,i=this;this._info=this._header.select(this._css.dot(this._css.classes.info)).on("mouseover",function(){var t=this.getBBox(),n=h.makeAbsoluteContext(this,this.farthestViewportElement),e=n(t.x-10,t.y+t.height+10);i.parent.findChildByName("gapminder-datanotes").setHook("size").show().setPos(e.x,e.y)}).on("mouseout",function(){return i.parent.findChildByName("gapminder-datanotes").hide()}).on("click",function(){return t.parent.findChildByName("gapminder-datanotes").pin()}),h.setIcon(this._info,c.question).select("svg").attr("width",0).attr("height",0)},_initFooter:function(){this._footer=this._svg.selectAll(this._css.dot(this._css.classes.footer)),this._initFooterText(),this._initFooterWarning()},_initFooterText:function(){this._footerText=this._footer.select(this._css.dot(this._css.classes.footerText)).text(this._translator("hints/dataWarning"))},_initFooterWarning:function(){var t=this;this._warning=this._footer.select(this._css.dot(this._css.classes.warning)).on("mouseover",function(){return t._updateDoubtOpaciy(1)}).on("mouseout",function(){return t._updateDoubtOpaciy(0)}).on("click",function(){return t.parent.findChildByName("gapminder-datawarning").toggle()}),h.setIcon(this._warning,c.warn).select("svg").attr("width",0).attr("height",0)},_initSankey:function(){this._sankey=(0,r.sankey)(),this._linksContainer=this._svg.select(this._css.dot(this._css.classes.linksContainer)),this._gradientLinksContainer=this._svg.select(this._css.dot(this._css.classes.gradientLinksContainer)),this._nodesContainer=this._svg.select(this._css.dot(this._css.classes.nodesContainer))},ready:function(){var t=this;this._setProfile(),this._redrawHeader(),this._redrawFooter(),this._resizeSankey(),this._makeMaxValuesGraph().then(function(){return t._updateValues()}).then(function(){t._redraw(),t._updateAllLabelsOpacity()})},resize:function(){this._setProfile(),this._calculateSize(),this._redrawHeader(),this._redrawFooter(),this._resizeSankey(),this._redraw(),this._updateAllLabelsOpacity()},_setProfile:function(){this._activeProfile=this.getActiveProfile(this._profiles,this._presentationProfiles)},_resizeSankey:function(){var t=this._header.node().getBBox(),i=this._footer.node().getBBox();this._sankey.nodePadding(this._activeProfile.nodePadding).nodeWidth(this._activeProfile.nodeWidth),this._sankey.extent([[this._activeProfile.margin.left,2*this._activeProfile.margin.top+t.height],[this._width-this._activeProfile.margin.right,this._height-2*this._activeProfile.margin.bottom-i.height]])},_redraw:function(){this._sankey(this._graph),this._getAnimationDuration(),this._adaptToMaxValues(),this._redrawLinks(),this._redrawNodes(),this._highlightEntities()},_adaptToMaxValues:function(){var t=this;this._sankey(this._maxValuesGraph=this._buildGraph(this._maxValues));var i=s(this._maxValuesGraph.nodes,1),n=i[0],e=n.value/this._getNodeHeight(n);this._graph.nodes=this._graph.nodes.map(function(i,n){var s=t._maxValuesGraph.nodes[n],r=s.y0+t._getNodeHeight(s)/2,o=i.value/e/2;return Object.assign(i,{y0:r-o,y1:r+o})}),this._graph.links=this._graph.links.map(function(t,i){return Object.assign(t,{width:t.value/e})}),this._sankey.update(this._graph)},_getAnimationDuration:function(){var t=this.model.time;return this._prevTime=this._nextTime||t.value,this._nextTime=t.value,this._duration=t.playing&&this._nextTime-this._prevTime>0?t.delayAnimations:0},_redrawHeader:function(){this._headerText.text(this.model.marker.size.getConceptprops().name);var t=this._headerText.node().getBBox(),i={x:this._activeProfile.margin.left,y:this._activeProfile.margin.top+t.height};this._headerText.attr("transform","translate("+i.x+", "+i.y+")");var n={x:this._activeProfile.margin.left+t.width+this._settings.iconMargin,y:this._activeProfile.margin.top};this._info.attr("transform","translate("+n.x+", "+n.y+")").select("svg").attr("width",this._activeProfile.iconSize).attr("height",this._activeProfile.iconSize)},_redrawFooter:function(){var t=this._footerText.node().getBBox(),i={x:this._width-this._activeProfile.margin.right-t.width,y:this._height-this._activeProfile.margin.bottom};this._footerText.attr("transform","translate("+i.x+", "+i.y+")");var n={x:this._width-this._activeProfile.margin.right-t.width-this._activeProfile.iconSize-this._settings.iconMargin,y:this._height-this._activeProfile.margin.bottom-this._activeProfile.iconSize};this._warning.attr("transform","translate("+n.x+", "+n.y+")").select("svg").attr("width",this._activeProfile.iconSize).attr("height",this._activeProfile.iconSize)},_updateDoubtOpaciy:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]},_redrawLinks:function(){this._redrawDefaultLinks(),this._redrawGradientLinks()},_redrawDefaultLinks:function(){var t=this,i=this._linksContainer.selectAll(this._css.dot(this._css.classes.link)).data(this._graph.links);i.exit().remove();var n=i.enter().append("path").attr("class",this._css.classes.link);n.append("title");var e=this._links=i.merge(n);e.transition().duration(this._duration).attr("d",(0,r.sankeyLinkHorizontal)()).attr("stroke-width",function(t){return Math.max(1,t.width)}).style("stroke",function(i){return t._createGradientDef(i)}),e.select("title").text(function(i){var n=i.value,e=i.source,s=i.target,r=t._entities.label;return r[e.name]+" â†’ "+r[s.name]+"\n"+t._format(n)})},_redrawGradientLinks:function(){var t=this,i=this._gradientLinksContainer.selectAll(this._css.dot(this._css.classes.gradientLink)).data(this._graph.links);i.exit().remove();var n=i.enter().append("path").attr("class",this._css.classes.gradientLink),e=this._gradientLinks=i.merge(n);e.style("opacity",0),(this._duration?e.transition().duration(this._duration):e).attr("d",(0,r.sankeyLinkHorizontal)()).attr("stroke-width",function(t){return Math.max(1,t.width)}).each(this._setDash).style("stroke",function(i){return t._createGradientDef(i)})},_createGradientDef:function(t){var i=[this._entities.color[t.source.name],this._entities.color[t.target.name]].map(function(t){return t.replace("#","")}),n=s(i,2),e=n[0],r=n[1],o="c-"+e+"-to-"+r;if(!this._defs.select("#"+o).node()){var a=this._defs.append("linearGradient").attr("id",o).attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","0%").attr("spreadMethod","pad"),h=t.source.y0.toFixed(10)===t.target.y0.toFixed(10)||t.source.y1.toFixed(10)===t.target.y1.toFixed(10);h&&a.attr("gradientUnits","userSpaceOnUse"),a.append("stop").attr("offset","0%").attr("stop-color","#"+e).attr("stop-opacity",1),a.append("stop").attr("offset",(h?50:100)+"%").attr("stop-color","#"+r).attr("stop-opacity",1)}return"url(#"+o+")"},_setDash:function(){var t=d3.select(this),i=t.node().getTotalLength();t.attr("stroke-dasharray",i).attr("stroke-dashoffset",i)},_redrawNodes:function(){var t=this,i=this,n=this.model.markerEntities,e=this._nodesContainer.selectAll(this._css.dot(this._css.classes.node)).data(this._graph.nodes);e.exit().remove();var s=e.enter().append("g").attr("class",this._css.classes.node);s.append("rect"),s.append("title"),s.append("text").classed(this._css.classes.strokeText,!0),s.append("text").classed(this._css.classes.defaultText,!0).classed(this._css.classes.stroke,!0);var r=this._nodes=e.merge(s);r.on("mouseover",function(t){return n.highlightMarker(t)}).on("mouseout",function(t){return n.clearHighlighted(t)}).on("click",function(t){return n.selectMarker(t)}),r.select("rect").transition().duration(this._duration).attr("x",function(t){return t.x0}).attr("y",function(t){return t.y0}).attr("height",this._getNodeHeight).attr("width",function(t){return t.x1-t.x0}).attr("fill",function(i){return t._entities.color[i.name]});var o=!0,a=function(t){var n=d3.select(this);o=n.style("paint-order").length>0;var e=t.x0<i._width/2,s=e?t.x1+i._settings.labelPadding:t.x0-i._settings.labelPadding,r=e?"start":"end";n.transition().duration(i._duration).attr("x",s).attr("y",(t.y1+t.y0)/2).attr("dy","0.35em").attr("text-anchor",r).style("font-size",(i.model.ui.presentation?16:12)+"px").text(i._entities.label[t.name])};r.select(this._css.dot(this._css.classes.defaultText)).each(a);var h=r.select(this._css.dot(this._css.classes.strokeText));o?h.remove():(h.each(a),r.select(this._css.dot(this._css.classes.defaultText)).classed("stroke",!1)),r.select("title").text(function(i){return t._entities.label[i.name]+"\n"+t._format(i.value)})},_getNodeHeight:function(t){return t.y1-t.y0},_updateAllLabelsOpacity:function(){var t=this;this._nodes.select("text").each(function(i){t._updateLabelOpacity(i,d3.select(this))})},_updateLabelOpacity:function(t,i){var n=this.model.markerEntities,e=this._getNodeHeight(t)+this._activeProfile.nodePadding,s=e>=i.node().getBBox().height||n.isSelected(t)||n.isHighlighted(t)?null:"hidden";i.style("visibility",s)},_getLayer:function(t){var i=[];return{links:this._gradientLinks.filter(function(n){return t(n,i)}),anotherLayerLinksData:i}},_getPrevLayer:function(t){return this._getLayer(function(i,n){var e=t.targetLinks.includes(i);return e&&n.push(i.source),e})},_getNextLayer:function(t){return this._getLayer(function(i,n){var e=t.sourceLinks.includes(i);return e&&n.push(i.target),e})},_highlightBranches:function(t){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._highlightPrevLayer(t,i),this._highlightNextLayer(t,i)},_highlightPrevLayer:function(t,i){var n=this,e=this._getPrevLayer(t),s=e.links,r=e.anotherLayerLinksData,o=s.attr("stroke-dashoffset",function(){return-Math.abs(d3.select(this).attr("stroke-dashoffset"))});this._highlightLayer(o,i).then(function(){return r.forEach(function(t){return n._highlightPrevLayer(t,i)})})},_highlightNextLayer:function(t,i){var n=this,e=this._getNextLayer(t),s=e.links,r=e.anotherLayerLinksData;this._highlightLayer(s,i).then(function(){return r.forEach(function(t){return n._highlightNextLayer(t,i)})})},_highlightLayer:function(t,i){var n=this,e=function(t){return i?t.attr("stroke-dashoffset",0):t.attr("stroke-dashoffset",null).attr("stroke-dasharray",null)};return t.style("opacity",null),new Promise(function(s){i?e(t.transition().duration(n._settings.gradientTransitionDuration).ease(d3.easeLinear)).on("end",s):(e(t),s())})},_highlightEntities:function(){var t=this,i=this.model.markerEntities,n=i.getSelected().length;this._nodes.each(function(e){var s=i.isSelected(e),r=i.isHighlighted(e);d3.select(this).classed("darkened",n&&!s),(s||r)&&t._highlightBranches(e,r&&!s)})},_unhighlightEntities:function(){this._gradientLinks.interrupt().style("opacity",0).each(this._setDash)},_makeMaxValuesGraph:function(){var t=this;return this._getAllValues().then(function(){return t._getMaxValues()})},_getMaxValues:function(){var t=this;return this._maxValues=Object.keys(this._allValues).reduce(function(i,n,e){var s=t._allValues[n].size;return Object.keys(s).forEach(function(t){var n=s[t];!e&&(i[t]={});var r=i[t];Object.keys(n).forEach(function(t){var i=n[t];(!e||r[t]<i)&&(r[t]=i)})}),i},{})},_getAllValues:function(){var t=this;return new Promise(function(i){return t.model.marker.getFrame(null,function(n){return i(Object.assign(t,{_allValues:n}))})})},_getValues:function(){var t=this;return Promise.all([new Promise(function(i){return t.model.markerEntities.getFrame(t.model.time.value,function(n){var e=n.color,s=n.label;return i(Object.assign(t,{_entities:{color:e,label:s}}))})}),new Promise(function(i){var n=t._allValues[t.model.time.value];n?i(Object.assign(t,{_values:n})):t.model.marker.getFrame(t.model.time.value,function(n){return i(Object.assign(t,{_values:n}))})})])},_buildGraph:function(t){var i={nodes:[],links:[]};Object.keys(t).forEach(function(n){var e=t[n];i.nodes.push({name:n}),Object.keys(e).forEach(function(t){i.nodes.push({name:t}),i.links.push({source:n,target:t,value:e[t]})})}),i.nodes=i.nodes.map(function(t){return t.name}).filter(function(t,i,n){return i===n.indexOf(t)}),i.links.forEach(function(t){t.source=i.nodes.indexOf(t.source),t.target=i.nodes.indexOf(t.target)});var n=this.model.entitiesAll.getDimension();return i.nodes=i.nodes.map(function(t){var i;return i={},e(i,n,t),e(i,"name",t),i}),i},_updateValues:function(){var t=this;return this._getValues().then(function(){return t._graph=t._buildGraph(t._values.size)})}});i.default=u},function(t,i,n){"use strict";i.a=function(t){return function(){return t}}},function(t,i,n){"use strict";n(24)},function(t,i,n){"use strict"},function(t,i,n){"use strict";n(18),n(19),n(47),n(22),n(51),n(25),n(27),n(26)},function(t,i,n){"use strict";i.a=function(t){return t}},function(t,i,n){"use strict"},function(t,i,n){"use strict";n(2)},function(t,i,n){"use strict";n(1),n(2),n(11)},function(t,i,n){"use strict"},function(t,i,n){"use strict"},function(t,i,n){"use strict";n(1)},function(t,i,n){"use strict"},function(t,i,n){"use strict";i.a=function(t,i){var n,e=t.length,s=-1,r=0;if(null==i)for(;++s<e;)(n=+t[s])&&(r+=n);else for(;++s<e;)(n=+i(t[s],s,t))&&(r+=n);return r}},function(t,i,n){"use strict";n(18),n(1),n(2),n(11)},function(t,i,n){"use strict";n(21)},function(t,i,n){"use strict";n(28)},function(t,i,n){"use strict";var e=n(66);n.d(i,"b",function(){return e.a});var s=(n(67),n(12));n.d(i,"a",function(){return s.a});n(65),n(68),n(64)},function(t,i,n){"use strict"},function(t,i,n){"use strict"},function(t,i,n){"use strict";function e(){return{}}function s(t,i,n){t[i]=n}function r(){return n.i(a.a)()}function o(t,i,n){t.set(i,n)}var a=n(12);i.a=function(){function t(i,e,s,r){if(e>=_.length)return null!=h&&i.sort(h),null!=c?c(i):i;for(var o,u,l,f=-1,d=i.length,p=_[e++],y=n.i(a.a)(),x=s();++f<d;)(l=y.get(o=p(u=i[f])+""))?l.push(u):y.set(o,[u]);return y.each(function(i,n){r(x,n,t(i,e,s,r))}),x}function i(t,n){if(++n>_.length)return t;var e,s=l[n-1];return null!=c&&n>=_.length?e=t.entries():(e=[],t.each(function(t,s){e.push({key:s,values:i(t,n)})})),null!=s?e.sort(function(t,i){return s(t.key,i.key)}):e}var h,c,u,_=[],l=[];return u={object:function(i){return t(i,0,e,s)},map:function(i){return t(i,0,r,o)},entries:function(n){return i(t(n,0,r,o),0)},key:function(t){return _.push(t),u},sortKeys:function(t){return l[_.length-1]=t,u},sortValues:function(t){return h=t,u},rollup:function(t){return c=t,u}}}},function(t,i,n){"use strict";function e(){}function s(t,i){var n=new e;if(t instanceof e)t.each(function(t){n.add(t)});else if(t){var s=-1,r=t.length;if(null==i)for(;++s<r;)n.add(t[s]);else for(;++s<r;)n.add(i(t[s],s,t))}return n}var r=n(12),o=r.a.prototype;e.prototype=s.prototype={constructor:e,has:o.has,add:function(t){return t+="",this[r.b+t]=t,this},remove:o.remove,clear:o.clear,values:o.keys,size:o.size,empty:o.empty,each:o.each}},function(t,i,n){"use strict"},function(t,i,n){"use strict";function e(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function s(){return new e}var r=Math.PI,o=2*r,a=o-1e-6;e.prototype=s.prototype={constructor:e,moveTo:function(t,i){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+i)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,i){this._+="L"+(this._x1=+t)+","+(this._y1=+i)},quadraticCurveTo:function(t,i,n,e){this._+="Q"+ +t+","+ +i+","+(this._x1=+n)+","+(this._y1=+e)},bezierCurveTo:function(t,i,n,e,s,r){this._+="C"+ +t+","+ +i+","+ +n+","+ +e+","+(this._x1=+s)+","+(this._y1=+r)},arcTo:function(t,i,n,e,s){t=+t,i=+i,n=+n,e=+e,s=+s;var o=this._x1,a=this._y1,h=n-t,c=e-i,u=o-t,_=a-i,l=u*u+_*_;if(s<0)throw new Error("negative radius: "+s);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=i);else if(l>1e-6)if(Math.abs(_*h-c*u)>1e-6&&s){var f=n-o,d=e-a,p=h*h+c*c,y=f*f+d*d,x=Math.sqrt(p),g=Math.sqrt(l),v=s*Math.tan((r-Math.acos((p+l-y)/(2*x*g)))/2),m=v/g,k=v/x;Math.abs(m-1)>1e-6&&(this._+="L"+(t+m*u)+","+(i+m*_)),this._+="A"+s+","+s+",0,0,"+ +(_*f>u*d)+","+(this._x1=t+k*h)+","+(this._y1=i+k*c)}else this._+="L"+(this._x1=t)+","+(this._y1=i);else;},arc:function(t,i,n,e,s,h){t=+t,i=+i,n=+n;var c=n*Math.cos(e),u=n*Math.sin(e),_=t+c,l=i+u,f=1^h,d=h?e-s:s-e;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+_+","+l:(Math.abs(this._x1-_)>1e-6||Math.abs(this._y1-l)>1e-6)&&(this._+="L"+_+","+l),n&&(d<0&&(d=d%o+o),d>a?this._+="A"+n+","+n+",0,1,"+f+","+(t-c)+","+(i-u)+"A"+n+","+n+",0,1,"+f+","+(this._x1=_)+","+(this._y1=l):d>1e-6&&(this._+="A"+n+","+n+",0,"+ +(d>=r)+","+f+","+(this._x1=t+n*Math.cos(s))+","+(this._y1=i+n*Math.sin(s))))},rect:function(t,i,n,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+i)+"h"+ +n+"v"+ +e+"h"+-n+"Z"},toString:function(){return this._}},i.a=s},function(t,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=n(97);n.d(i,"sankey",function(){return e.a});var s=n(44);n.d(i,"sankeyCenter",function(){return s.a}),n.d(i,"sankeyLeft",function(){return s.b}),n.d(i,"sankeyRight",function(){return s.c}),n.d(i,"sankeyJustify",function(){return s.d});var r=n(98);n.d(i,"sankeyLinkHorizontal",function(){return r.a})},function(t,i,n){"use strict";var e=(n(72),n(30),n(14),n(93),n(73),n(35),n(36),n(85));n.d(i,"a",function(){return e.a});n(95),n(37),n(38),n(39),n(40),n(41),n(42),n(43),n(74),n(75),n(7),n(76),n(32),n(33),n(8),n(77),n(78),n(13),n(79),n(9),n(80),n(81),n(82),n(94),n(87),n(86),n(5),n(88),n(89),n(15),n(90),n(91),n(6),n(92)},function(t,i,n){"use strict";n(3),n(0),n(4)},function(t,i,n){"use strict";n(34),n(30),n(35)},function(t,i,n){"use strict";function e(t){this._context=t}var s=n(10),r=n(7);e.prototype={areaStart:s.a,areaEnd:s.a,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,i){switch(t=+t,i=+i,this._point){case 0:this._point=1,this._x2=t,this._y2=i;break;case 1:this._point=2,this._x3=t,this._y3=i;break;case 2:this._point=3,this._x4=t,this._y4=i,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+i)/6);break;default:n.i(r.b)(this,t,i)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=i}}},function(t,i,n){"use strict";function e(t){this._context=t}var s=n(7);e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,i){switch(t=+t,i=+i,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var e=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+i)/6;this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break;case 3:this._point=4;default:n.i(s.b)(this,t,i)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=i}}},function(t,i,n){"use strict";function e(t,i){this._basis=new s.a(t),this._beta=i}var s=n(7);e.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,i=this._y,n=t.length-1;if(n>0)for(var e,s=t[0],r=i[0],o=t[n]-s,a=i[n]-r,h=-1;++h<=n;)e=h/n,this._basis.point(this._beta*t[h]+(1-this._beta)*(s+e*o),this._beta*i[h]+(1-this._beta)*(r+e*a));this._x=this._y=null,this._basis.lineEnd()},point:function(t,i){this._x.push(+t),this._y.push(+i)}};!function t(i){function n(t){return 1===i?new s.a(t):new e(t,i)}return n.beta=function(i){return t(+i)},n}(.85)},function(t,i,n){"use strict";function e(t,i){this._context=t,this._alpha=i}var s=n(32),r=n(10),o=n(13);e.prototype={areaStart:r.a,areaEnd:r.a,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,i){if(t=+t,i=+i,this._point){var e=this._x2-t,s=this._y2-i;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+s*s,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=i;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=i);break;case 2:this._point=3,this._x5=t,this._y5=i;break;default:n.i(o.a)(this,t,i)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=i}};!function t(i){function n(t){return i?new e(t,i):new s.a(t,0)}return n.alpha=function(i){return t(+i)},n}(.5)},function(t,i,n){"use strict";function e(t,i){this._context=t,this._alpha=i}var s=n(33),r=n(13);e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,i){if(t=+t,i=+i,this._point){var e=this._x2-t,s=this._y2-i;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+s*s,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:n.i(r.a)(this,t,i)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=i}};!function t(i){function n(t){return i?new e(t,i):new s.a(t,0)}return n.alpha=function(i){return t(+i)},n}(.5)},function(t,i,n){"use strict";function e(t){this._context=t}var s=n(10);e.prototype={areaStart:s.a,areaEnd:s.a,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,i){t=+t,i=+i,this._point?this._context.lineTo(t,i):(this._point=1,this._context.moveTo(t,i))}}},function(t,i,n){"use strict";function e(t){return t<0?-1:1}function s(t,i,n){var s=t._x1-t._x0,r=i-t._x1,o=(t._y1-t._y0)/(s||r<0&&-0),a=(n-t._y1)/(r||s<0&&-0),h=(o*r+a*s)/(s+r);return(e(o)+e(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(h))||0}function r(t,i){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-i)/2:i}function o(t,i,n){var e=t._x0,s=t._y0,r=t._x1,o=t._y1,a=(r-e)/3;t._context.bezierCurveTo(e+a,s+a*i,r-a,o-a*n,r,o)}function a(t){this._context=t}function h(t){this._context=new c(t)}function c(t){this._context=t}a.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:o(this,this._t0,r(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,i){var n=NaN;if(t=+t,i=+i,t!==this._x1||i!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break;case 1:this._point=2;break;case 2:this._point=3,o(this,r(this,n=s(this,t,i)),n);break;default:o(this,this._t0,n=s(this,t,i))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=i,this._t0=n}}},(h.prototype=Object.create(a.prototype)).point=function(t,i){a.prototype.point.call(this,i,t)},c.prototype={moveTo:function(t,i){this._context.moveTo(i,t)},closePath:function(){this._context.closePath()},lineTo:function(t,i){this._context.lineTo(i,t)},bezierCurveTo:function(t,i,n,e,s,r){this._context.bezierCurveTo(i,t,e,n,r,s)}}},function(t,i,n){"use strict";function e(t){this._context=t}function s(t){var i,n,e=t.length-1,s=new Array(e),r=new Array(e),o=new Array(e);for(s[0]=0,r[0]=2,o[0]=t[0]+2*t[1],i=1;i<e-1;++i)s[i]=1,r[i]=4,o[i]=4*t[i]+2*t[i+1];for(s[e-1]=2,r[e-1]=7,o[e-1]=8*t[e-1]+t[e],i=1;i<e;++i)n=s[i]/r[i-1],r[i]-=n,o[i]-=n*o[i-1];for(s[e-1]=o[e-1]/r[e-1],i=e-2;i>=0;--i)s[i]=(o[i]-s[i+1])/r[i];for(r[e-1]=(t[e]+s[e-1])/2,i=0;i<e-1;++i)r[i]=2*t[i+1]-s[i+1];return[s,r]}e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,i=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],i[0]):this._context.moveTo(t[0],i[0]),2===n)this._context.lineTo(t[1],i[1]);else for(var e=s(t),r=s(i),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(e[0][o],r[0][o],e[1][o],r[1][o],t[a],i[a]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,i){this._x.push(+t),this._y.push(+i)}}},function(t,i,n){"use strict";function e(t,i){this._context=t,this._t=i}e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,i){switch(t=+t,i=+i,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,i),this._context.lineTo(t,i);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,i)}}this._x=t,this._y=i}}},function(t,i,n){"use strict";i.a=function(t,i){return i<t?-1:i>t?1:i>=t?0:NaN}},function(t,i,n){"use strict";i.a=function(t){return t}},function(t,i,n){"use strict";function e(t){return t.source}function s(t){return t.target}function r(t){function i(){var i,e=Array.apply(null,arguments),s=r.apply(this,e),c=o.apply(this,e);if(l||(l=i=n.i(h.a)()),t(l,+a.apply(this,(e[0]=s,e)),+_.apply(this,e),+a.apply(this,(e[0]=c,e)),+_.apply(this,e)),i)return l=null,i+""||null}var r=e,o=s,a=u.a,_=u.b,l=null;return i.source=function(t){return arguments.length?(r=t,i):r},i.target=function(t){return arguments.length?(o=t,i):o},i.x=function(t){return arguments.length?(a="function"===typeof t?t:n.i(c.a)(+t),i):a},i.y=function(t){return arguments.length?(_="function"===typeof t?t:n.i(c.a)(+t),i):_},i.context=function(t){return arguments.length?(l=null==t?null:t,i):l},i}function o(t,i,n,e,s){t.moveTo(i,n),t.bezierCurveTo(i=(i+e)/2,n,i,s,e,s)}function a(){return r(o)}i.a=a;var h=n(3),c=(n(31),n(0)),u=n(16);n(36)},function(t,i,n){"use strict"},function(t,i,n){"use strict";n(5)},function(t,i,n){"use strict";n(5)},function(t,i,n){"use strict";n(5)},function(t,i,n){"use strict";n(15)},function(t,i,n){"use strict";n(6),n(15)},function(t,i,n){"use strict";n(6)},function(t,i,n){"use strict";n(0),n(83),n(84),n(4)},function(t,i,n){"use strict";n(31),n(0),n(5),n(6)},function(t,i,n){"use strict";var e=(n(3),n(37)),s=n(38),r=n(39),o=n(41),a=n(40),h=n(42),c=n(43);n(0),e.a,s.a,r.a,a.a,o.a,h.a,c.a},function(t,i,n){"use strict";function e(t){return function(){return t}}i.a=e},function(t,i,n){"use strict";function e(t,i){return r(t.source,i.source)||t.index-i.index}function s(t,i){return r(t.target,i.target)||t.index-i.index}function r(t,i){return t.y0-i.y0}function o(t){return t.value}function a(t){return(t.y0+t.y1)/2}function h(t){return a(t.source)*t.value}function c(t){return a(t.target)*t.value}function u(t){return t.index}function _(t){return t.nodes}function l(t){return t.links}function f(t,i){var n=t.get(i);if(!n)throw new Error("missing: "+i);return n}var d=n(17),p=n(63),y=n(44),x=n(96);i.a=function(){function t(){var t={nodes:z.apply(null,arguments),links:S.apply(null,arguments)};return i(t),g(t),v(t),m(t),k(t),t}function i(t){t.nodes.forEach(function(t,i){t.index=i,t.sourceLinks=[],t.targetLinks=[]});var i=n.i(p.a)(t.nodes,L);t.links.forEach(function(t,n){t.index=n;var e=t.source,s=t.target;"object"!==typeof e&&(e=t.source=f(i,e)),"object"!==typeof s&&(s=t.target=f(i,s)),e.sourceLinks.push(t),s.targetLinks.push(t)})}function g(t){t.nodes.forEach(function(t){t.value=Math.max(n.i(d.b)(t.sourceLinks,o),n.i(d.b)(t.targetLinks,o))})}function v(t){var i,n,e;for(i=t.nodes,n=[],e=0;i.length;++e,i=n,n=[])i.forEach(function(t){t.depth=e,t.sourceLinks.forEach(function(t){n.indexOf(t.target)<0&&n.push(t.target)})});for(i=t.nodes,n=[],e=0;i.length;++e,i=n,n=[])i.forEach(function(t){t.height=e,t.targetLinks.forEach(function(t){n.indexOf(t.source)<0&&n.push(t.source)})});var s=(w-b-P)/(e-1);t.nodes.forEach(function(t){t.x1=(t.x0=b+Math.max(0,Math.min(e-1,Math.floor(N.call(null,t,e))))*s)+P})}function m(t){function i(){e.forEach(function(t){var i,n,e,s=T,o=t.length;for(t.sort(r),e=0;e<o;++e)i=t[e],n=s-i.y0,n>0&&(i.y0+=n,i.y1+=n),s=i.y1+E;if((n=s-E-M)>0)for(s=i.y0-=n,i.y1-=n,e=o-2;e>=0;--e)i=t[e],n=i.y1+E-s,n>0&&(i.y0-=n,i.y1-=n),s=i.y0})}var e=n.i(p.b)().key(function(t){return t.x0}).sortKeys(d.c).entries(t.nodes).map(function(t){return t.values});!function(){var i=n.i(d.a)(e,function(t){return(M-T-(t.length-1)*E)/n.i(d.b)(t,o)});e.forEach(function(t){t.forEach(function(t,n){t.y1=(t.y0=n)+t.value*i})}),t.links.forEach(function(t){t.width=t.value*i})}(),i();for(var s=1,u=A;u>0;--u)!function(t){e.slice().reverse().forEach(function(i){i.forEach(function(i){if(i.sourceLinks.length){var e=(n.i(d.b)(i.sourceLinks,c)/n.i(d.b)(i.sourceLinks,o)-a(i))*t;i.y0+=e,i.y1+=e}})})}(s*=.99),i(),function(t){e.forEach(function(i){i.forEach(function(i){if(i.targetLinks.length){var e=(n.i(d.b)(i.targetLinks,h)/n.i(d.b)(i.targetLinks,o)-a(i))*t;i.y0+=e,i.y1+=e}})})}(s),i()}function k(t){t.nodes.forEach(function(t){t.sourceLinks.sort(s),t.targetLinks.sort(e)}),t.nodes.forEach(function(t){var i=t.y0,n=i;t.sourceLinks.forEach(function(t){t.y0=i+t.width/2,i+=t.width}),t.targetLinks.forEach(function(t){t.y1=n+t.width/2,n+=t.width})})}var b=0,T=0,w=1,M=1,P=24,E=8,L=u,N=y.d,z=_,S=l,A=32;return t.update=function(t){return k(t),t},t.nodeId=function(i){return arguments.length?(L="function"===typeof i?i:n.i(x.a)(i),t):L},t.nodeAlign=function(i){return arguments.length?(N="function"===typeof i?i:n.i(x.a)(i),t):N},t.nodeWidth=function(i){return arguments.length?(P=+i,t):P},t.nodePadding=function(i){return arguments.length?(E=+i,t):E},t.nodes=function(i){return arguments.length?(z="function"===typeof i?i:n.i(x.a)(i),t):z},t.links=function(i){return arguments.length?(S="function"===typeof i?i:n.i(x.a)(i),t):S},t.size=function(i){return arguments.length?(b=T=0,w=+i[0],M=+i[1],t):[w-b,M-T]},t.extent=function(i){return arguments.length?(b=+i[0][0],w=+i[1][0],T=+i[0][1],M=+i[1][1],t):[[b,T],[w,M]]},t.iterations=function(i){return arguments.length?(A=+i,t):A},t}},function(t,i,n){"use strict";function e(t){return[t.source.x1,t.y0]}function s(t){return[t.target.x0,t.y1]}var r=n(71);i.a=function(){return n.i(r.a)().source(e).target(s)}},function(t,i){},function(t,i){t.exports='\x3c!-- Sankey Component --\x3e\n<div class="vzb-sankey">\n    <svg class="vzb-sankey-svg">\n        <g class="vzb-sankey-header">\n            <text class="vzb-sankey-header-text"></text>\n            <g class="vzb-data-info-icon"></g>\n        </g>\n        <g class="vzb-sankey-chart">\n            <g class="links-container"></g>\n            <g class="gradient-links-container"></g>\n            <g class="nodes-container"></g>\n        </g>\n        <g class="vzb-sankey-footer">\n            <g class="vzb-data-warning">\n                <text class="vzb-sankey-footer-text"></text>\n                <g class="vzb-data-warning-icon"></g>\n            </g>\n        </g>\n        <defs></defs>\n    </svg>\n</div>\n'},function(t,i,n){t.exports=n(45)}]);
//# sourceMappingURL=sankey.min.js.map